(()=>{var t={987:t=>{"use strict";var e={single_source_shortest_paths:function(t,s,o){var i={},r={};r[s]=0;var n,l,a,h,u,p,c,d=e.PriorityQueue.make();for(d.push(s,0);!d.empty();)for(a in l=(n=d.pop()).value,h=n.cost,u=t[l]||{})u.hasOwnProperty(a)&&(p=h+u[a],c=r[a],(void 0===r[a]||c>p)&&(r[a]=p,d.push(a,p),i[a]=l));if(void 0!==o&&void 0===r[o]){var f=["Could not find a path from ",s," to ",o,"."].join("");throw new Error(f)}return i},extract_shortest_path_from_predecessor_list:function(t,e){for(var s=[],o=e;o;)s.push(o),t[o],o=t[o];return s.reverse(),s},find_path:function(t,s,o){var i=e.single_source_shortest_paths(t,s,o);return e.extract_shortest_path_from_predecessor_list(i,o)},PriorityQueue:{make:function(t){var s,o=e.PriorityQueue,i={};for(s in t=t||{},o)o.hasOwnProperty(s)&&(i[s]=o[s]);return i.queue=[],i.sorter=t.sorter||o.default_sorter,i},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var s={value:t,cost:e};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=e},297:t=>{let e=null;const s={"Alice's House":{x:279,y:100},"Bob's House":{x:295,y:203},Cabin:{x:372,y:67},"Daria's House":{x:183,y:285},"Ernie's House":{x:50,y:283},Farm:{x:36,y:118},"Grete's House":{x:35,y:187},Marketplace:{x:162,y:110},"Post Office":{x:205,y:57},Shop:{x:137,y:212},"Town Hall":{x:202,y:213}},o=Object.keys(s);class i{constructor(t,e,s){this.worldState=t,this.robot=e,this.robotState=s,this.turn=0;let o=window.__sandbox?window.__sandbox.output.div:document.body,i=o.ownerDocument;this.node=o.appendChild(i.createElement("div")),this.node.style.cssText="position: relative; line-height: 0.1; margin-left: 10px",this.map=this.node.appendChild(i.createElement("img")),this.map.src="img/village2x.png",this.map.style.cssText="vertical-align: -8px",this.robotElt=this.node.appendChild(i.createElement("div")),this.robotElt.style.cssText="position: absolute; transition: left 0.4s, top 0.4s;",this.robotElt.appendChild(i.createElement("img")).src="img/robot_moving2x.gif",this.parcels=[],this.text=this.node.appendChild(i.createElement("span")),this.button=this.node.appendChild(i.createElement("button")),this.button.style.cssText="color: white; background: #28b; border: none; border-radius: 2px; padding: 2px 5px; line-height: 1.1; font-family: sans-serif; font-size: 80%",this.button.textContent="Stop",this.button.addEventListener("click",(()=>this.clicked())),this.schedule(),this.updateView(),this.updateParcels(),this.robotElt.addEventListener("transitionend",(()=>this.updateParcels()))}updateView(){let t=s[this.worldState.place];this.robotElt.style.top=t.y-38+"px",this.robotElt.style.left=t.x-16+"px",this.text.textContent=` Turn ${this.turn} `}updateParcels(){for(;this.parcels.length;)this.parcels.pop().remove();let t={};for(let{place:e,address:i}of this.worldState.parcels){let r=t[e]||(t[e]=0);t[e]+=14;let n=document.createElement("div"),l=16*o.indexOf(i);if(n.style.cssText="position: absolute; height: 16px; width: 16px; background-image: url(img/parcel2x.png); background-position: 0 -"+l+"px",e==this.worldState.place)n.style.left="25px",n.style.bottom=20+r+"px",this.robotElt.appendChild(n);else{let t=s[e];n.style.left=t.x-5+"px",n.style.top=t.y-10-r+"px",this.node.appendChild(n)}this.parcels.push(n)}}tick(){let{direction:t,memory:e}=this.robot(this.worldState,this.robotState);this.worldState=this.worldState.move(t),this.robotState=e,this.turn++,this.updateView(),0==this.worldState.parcels.length?(this.button.remove(),this.text.textContent=` Finished after ${this.turn} turns`,this.robotElt.firstChild.src="img/robot_idle2x.png"):this.schedule()}schedule(){this.timeout=setTimeout((()=>this.tick()),500)}clicked(){null==this.timeout?(this.schedule(),this.button.textContent="Stop",this.robotElt.firstChild.src="img/robot_moving2x.gif"):(clearTimeout(this.timeout),this.timeout=null,this.button.textContent="Start",this.robotElt.firstChild.src="img/robot_idle2x.png")}}t.exports=function(t,s,o){e&&null!=e.timeout&&clearTimeout(e.timeout),e=new i(t,s,o)}},304:t=>{t.exports=function(t){let e=Object.create(null);function s(t,s){null==e[t]?(e[t]={},e[t][s]=1):e[t][s]=1}for(let[e,o]of t.map((t=>t.split("-"))))s(e,o),s(o,e);return e}},942:(t,e,s)=>{const o=s(304)(["Alice's House-Bob's House","Alice's House-Cabin","Alice's House-Post Office","Bob's House-Town Hall","Daria's House-Ernie's House","Daria's House-Town Hall","Ernie's House-Grete's House","Grete's House-Farm","Grete's House-Shop","Marketplace-Farm","Marketplace-Post Office","Marketplace-Shop","Marketplace-Town Hall","Shop-Town Hall"]);console.log(o),t.exports=o},607:(t,e,s)=>{const o=s(987),i=s(942);e.O=function({place:t,parcels:e},s){if(0==s.length){let r=e[0];s=r.place!=t?o.find_path(i,t,r.place):o.find_path(i,t,r.address)}return{direction:s[0],memory:s.slice(1)}}},800:(t,e,s)=>{const o=s(942);function i(t){return t[Math.floor(Math.random()*t.length)]}class r{constructor(t,e){this.place=t,this.parcels=e}move(t){if(o[this.place].hasOwnProperty(t)){let e=this.parcels.map((e=>e.place!=this.place?e:{place:t,address:e.address})).filter((t=>t.place!=t.address));return new r(t,e)}return this}}r.random=function(t=5){let e=[];for(let s=0;s<t;s++){let t,s=i(Object.keys(o));do{t=i(Object.keys(o))}while(t==s);e.push({place:t,address:s})}return new r("Post Office",e)},e.G=r}},e={};function s(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,s),r.exports}(()=>{const t=s(297),e=s(607).O;t(s(800).G.random(),e,[])})()})();